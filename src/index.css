@import "tailwindcss";
@import "./styles/invoice.css";

/* Import Space Mono font for brutalist theme */
@import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap');

/* ============================================================================
   BRUTALIST THEME CSS VARIABLES
   ============================================================================ */

:root {
    /* Brutalist color palette */
    --brutalist-red: 358 100% 67%;
    --brutalist-yellow: 44 100% 68%;
    --brutalist-green: 137 79% 54%;
    --brutalist-cyan: 201 100% 70%;
    
    /* Brutalist styling tokens */
    --brutalist-border: 3px;
    --brutalist-shadow: 6px 6px 0px hsl(0, 0%, 4%);
    --brutalist-shadow-accent: 6px 6px 0px hsl(var(--brutalist-yellow));
    --brutalist-shadow-sm: 4px 4px 0px hsl(0, 0%, 4%);
    --brutalist-shadow-lg: 8px 8px 0px hsl(0, 0%, 4%);
    
    /* Brutalist light mode colors */
    --brutalist-bg: hsl(0 0% 98%);
    --brutalist-fg: hsl(0 0% 4%);
    --brutalist-card: hsl(0 0% 100%);
    --brutalist-muted: hsl(0 0% 88%);
    --brutalist-muted-fg: hsl(0 0% 40%);
    --brutalist-border-color: hsl(0 0% 4%);
}

/* Brutalist dark mode colors */
@media (prefers-color-scheme: dark) {
    :root {
        --brutalist-bg: hsl(0 0% 4%);
        --brutalist-fg: hsl(0 0% 98%);
        --brutalist-card: hsl(0 0% 7%);
        --brutalist-muted: hsl(0 0% 15%);
        --brutalist-muted-fg: hsl(0 0% 60%);
        --brutalist-border-color: hsl(0 0% 98%);
        --brutalist-shadow: 6px 6px 0px hsl(var(--brutalist-yellow));
        --brutalist-shadow-sm: 4px 4px 0px hsl(var(--brutalist-yellow));
        --brutalist-shadow-lg: 8px 8px 0px hsl(var(--brutalist-yellow));
    }
}

@keyframes slideInRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }

    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@layer base {

    /* Dark mode color scheme */
    @media (prefers-color-scheme: dark) {
        :root {
            color-scheme: dark;
        }
    }

    /* Consistent click affordance across themes */
    a[href],
    button:not(:disabled),
    [role="button"]:not([aria-disabled="true"]),
    select:not(:disabled),
    summary {
        cursor: pointer;
    }

    button:disabled,
    [aria-disabled="true"],
    [disabled] {
        cursor: not-allowed;
    }
}

/* ============================================================================
   BRUTALIST THEME UTILITY CLASSES
   ============================================================================ */

@layer utilities {
    /* Brutalist border utility */
    .brutalist-border {
        border: var(--brutalist-border) solid var(--brutalist-border-color);
    }
    
    /* Brutalist shadow utilities */
    .brutalist-shadow {
        box-shadow: var(--brutalist-shadow);
    }
    
    .brutalist-shadow-sm {
        box-shadow: var(--brutalist-shadow-sm);
    }
    
    .brutalist-shadow-lg {
        box-shadow: var(--brutalist-shadow-lg);
    }
    
    .brutalist-shadow-accent {
        box-shadow: var(--brutalist-shadow-accent);
    }
    
    /* Brutalist hover lift effect */
    .brutalist-hover-lift {
        transition: transform 200ms, box-shadow 200ms;
    }
    
    .brutalist-hover-lift:hover {
        transform: translate(-3px, -3px);
        box-shadow: 9px 9px 0px var(--brutalist-border-color);
    }
    
    /* Brutalist text styles */
    .brutalist-text {
        font-family: 'Space Mono', monospace;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }
    
    .brutalist-heading {
        font-family: 'Space Mono', monospace;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }
}

/* ============================================================================
   BRUTALIST FORM CONSISTENCY
   ============================================================================
*/

.brutalist-theme .brutalist-form label,
.brutalist-theme .brutalist-form h3 {
    font-family: 'Space Mono', monospace;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--brutalist-fg) !important;
}

.brutalist-theme .brutalist-form p.text-xs {
    color: var(--brutalist-muted-fg) !important;
}

.brutalist-theme .brutalist-form input:not([type="checkbox"]):not([type="file"]),
.brutalist-theme .brutalist-form select,
.brutalist-theme .brutalist-form textarea {
    border: var(--brutalist-border) solid var(--brutalist-border-color) !important;
    border-radius: 0 !important;
    background: var(--brutalist-card) !important;
    color: var(--brutalist-fg) !important;
    font-family: 'Space Mono', monospace;
}

.brutalist-theme .brutalist-form input::placeholder,
.brutalist-theme .brutalist-form textarea::placeholder {
    color: var(--brutalist-muted-fg) !important;
}

.brutalist-theme .brutalist-form input:focus,
.brutalist-theme .brutalist-form select:focus,
.brutalist-theme .brutalist-form textarea:focus {
    outline: none;
    box-shadow: 4px 4px 0 hsl(var(--brutalist-yellow));
}

.brutalist-theme .brutalist-form input[type="checkbox"] {
    border: 2px solid var(--brutalist-border-color) !important;
    border-radius: 0 !important;
    background: var(--brutalist-card) !important;
}

.brutalist-theme .brutalist-form .brutalist-form-section {
    border-top: var(--brutalist-border) solid var(--brutalist-border-color) !important;
}

.brutalist-theme .brutalist-form .brutalist-form-panel {
    border: var(--brutalist-border) solid var(--brutalist-border-color) !important;
    border-radius: 0 !important;
    background: var(--brutalist-card) !important;
}

.brutalist-theme .brutalist-form .brutalist-form-warning {
    border: var(--brutalist-border) solid var(--brutalist-border-color) !important;
    border-radius: 0 !important;
    background: hsl(var(--brutalist-yellow)) !important;
    color: var(--brutalist-fg) !important;
}

.brutalist-theme .brutalist-form .brutalist-form-error {
    border: var(--brutalist-border) solid var(--brutalist-border-color) !important;
    border-radius: 0 !important;
    background: hsl(var(--brutalist-red)) !important;
    color: white !important;
}

/* ============================================================================
   BRUTALIST MICRO-INTERACTIONS + TYPOGRAPHY
   ============================================================================
*/

.brutalist-theme .brutalist-text {
    line-height: 1.2;
}

.brutalist-theme .brutalist-heading {
    line-height: 1.1;
    text-wrap: balance;
}

.brutalist-theme .tabular-nums {
    font-family: 'Space Mono', monospace;
    font-variant-numeric: tabular-nums;
    letter-spacing: 0.02em;
}

.brutalist-theme .brutalist-form input,
.brutalist-theme .brutalist-form select,
.brutalist-theme .brutalist-form textarea {
    font-size: 0.92rem;
    line-height: 1.35;
}

.brutalist-theme button[class*="brutalist-border"] {
    transition: transform 120ms ease, box-shadow 120ms ease, background-color 120ms ease, color 120ms ease;
    box-shadow: var(--brutalist-shadow-sm);
}

.brutalist-theme button[class*="brutalist-border"]:hover:not(:disabled) {
    transform: translate(-2px, -2px);
    box-shadow: var(--brutalist-shadow);
}

.brutalist-theme button[class*="brutalist-border"]:active:not(:disabled) {
    transform: translate(0, 0);
    box-shadow: 2px 2px 0 var(--brutalist-border-color);
}

.brutalist-theme button[class*="brutalist-border"]:focus-visible {
    outline: 3px solid hsl(var(--brutalist-cyan));
    outline-offset: 2px;
}

.brutalist-theme button[class*="brutalist-border"] .lucide {
    stroke-width: 2.4;
}

/* ============================================================================
   CRITICAL: INVOICE ISOLATION PROTECTION
   ============================================================================
   
   Brutalist styling must NEVER affect invoice rendering, PDF generation, or printing.
   These rules ensure invoice containers are completely isolated from brutalist theme.
   
   DO NOT MODIFY these rules without understanding the impact on invoice rendering!
   ============================================================================ */

/* Reset brutalist styling inside invoice containers */
.invoice-container .brutalist-border,
.invoice-light-mode .brutalist-border,
.pdf-generation-temp .brutalist-border {
    border: revert !important;
}

.invoice-container .brutalist-shadow,
.invoice-container .brutalist-shadow-sm,
.invoice-container .brutalist-shadow-lg,
.invoice-container .brutalist-shadow-accent,
.invoice-light-mode .brutalist-shadow,
.invoice-light-mode .brutalist-shadow-sm,
.invoice-light-mode .brutalist-shadow-lg,
.invoice-light-mode .brutalist-shadow-accent,
.pdf-generation-temp .brutalist-shadow,
.pdf-generation-temp .brutalist-shadow-sm,
.pdf-generation-temp .brutalist-shadow-lg,
.pdf-generation-temp .brutalist-shadow-accent {
    box-shadow: revert !important;
}

.invoice-container .brutalist-text,
.invoice-container .brutalist-heading,
.invoice-light-mode .brutalist-text,
.invoice-light-mode .brutalist-heading,
.pdf-generation-temp .brutalist-text,
.pdf-generation-temp .brutalist-heading {
    font-family: revert !important;
    text-transform: revert !important;
    letter-spacing: revert !important;
}

/* Ensure brutalist theme class on html doesn't affect invoice containers */
.brutalist-theme .invoice-container,
.brutalist-theme .invoice-container *,
.brutalist-theme .invoice-light-mode,
.brutalist-theme .invoice-light-mode *,
.brutalist-theme .pdf-generation-temp,
.brutalist-theme .pdf-generation-temp * {
    /* Preserve invoice isolation - do not apply brutalist styles */
    font-family: inherit;
}

@layer utilities {

    /* Hide scrollbar for Chrome, Safari and Opera */
    .scrollbar-hide::-webkit-scrollbar {
        display: none;
    }

    /* Hide scrollbar for IE, Edge and Firefox */
    .scrollbar-hide {
        -ms-overflow-style: none;
        /* IE and Edge */
        scrollbar-width: none;
        /* Firefox */
    }

    /* Force light mode for all invoice content - prevent dark mode from affecting invoices */
    /* This completely isolates invoices from dark mode using a more aggressive approach */

    /* Base light mode styling */
    .invoice-light-mode {
        color-scheme: light !important;
        isolation: isolate;
        /* Creates a new stacking context */
        background-color: #ffffff !important;
    }

    @media (prefers-color-scheme: dark) {

        /* Force light mode container with white background */
        .invoice-light-mode {
            color-scheme: light !important;
            background-color: #ffffff !important;
        }

        /* Only override Tailwind dark mode classes - preserve all template inline styles */
        /* Override Tailwind dark mode text classes that would make text white/light */
        .invoice-light-mode .dark\:text-white,
        .invoice-light-mode .dark\:text-slate-50,
        .invoice-light-mode .dark\:text-slate-100,
        .invoice-light-mode .dark\:text-slate-200,
        .invoice-light-mode .dark\:text-slate-300,
        .invoice-light-mode .dark\:text-slate-400 {
            color: #1f2937 !important;
        }

        /* Force light backgrounds - override dark mode background classes */
        .invoice-light-mode .dark\:bg-slate-800,
        .invoice-light-mode .dark\:bg-slate-700,
        .invoice-light-mode .dark\:bg-slate-900,
        .invoice-light-mode .dark\:bg-slate-950,
        .invoice-light-mode .dark\:bg-black {
            background-color: #ffffff !important;
        }

        /* Override border colors to light mode equivalents */
        .invoice-light-mode .dark\:border-slate-700,
        .invoice-light-mode .dark\:border-slate-600,
        .invoice-light-mode .dark\:border-slate-800 {
            border-color: #e5e7eb !important;
        }

        /* Ensure template elements with inline styles are not affected */
        /* Templates use inline styles for colors, so they should work correctly */
        /* Only elements without explicit styling that inherit from dark mode need fixing */
    }

    /* PDF generation styles - for temporary elements used during PDF/email generation */
    .pdf-generation-temp {
        color-scheme: light !important;
        background-color: #ffffff !important;
    }

    .pdf-generation-temp .brutalist-invoice-number {
        margin-top: 20px !important;
    }

    @media (prefers-color-scheme: dark) {

        /* Force light mode for PDF generation - only override Tailwind classes */
        .pdf-generation-temp {
            color-scheme: light !important;
            background-color: #ffffff !important;
        }

        .pdf-generation-temp .dark\:text-white,
        .pdf-generation-temp .dark\:text-slate-50,
        .pdf-generation-temp .dark\:text-slate-100,
        .pdf-generation-temp .dark\:text-slate-200,
        .pdf-generation-temp .dark\:text-slate-300,
        .pdf-generation-temp .dark\:text-slate-400 {
            color: #1f2937 !important;
        }

        .pdf-generation-temp .dark\:bg-slate-800,
        .pdf-generation-temp .dark\:bg-slate-700,
        .pdf-generation-temp .dark\:bg-slate-900 {
            background-color: #ffffff !important;
        }

        /* Override dark mode for elements without explicit color - but exclude black backgrounds */
        /* Use "color:" (with colon) to specifically match the color property, not background-color */
        .pdf-generation-temp *:not([style*="background: #000"]):not([style*="background:#000"]):not([style*="background-color: #000"]):not([style*="background-color:#000"]):not([style*="color:"]) {
            color: #1f2937 !important;
        }

        /* Preserve black background + white text for Brutalist template - must come after general rule */
        .pdf-generation-temp .brutalist-template [style*="background: #000"],
        .pdf-generation-temp .brutalist-template [style*="background:#000"],
        .pdf-generation-temp .brutalist-template [style*="background: #000000"],
        .pdf-generation-temp .brutalist-template [style*="background:#000000"],
        .pdf-generation-temp .brutalist-template [style*="background-color: #000"],
        .pdf-generation-temp .brutalist-template [style*="background-color:#000"],
        .pdf-generation-temp .brutalist-template [style*="background-color: #000000"],
        .pdf-generation-temp .brutalist-template [style*="background-color:#000000"],
        .pdf-generation-temp .brutalist-template [style*="background: rgb(0, 0, 0)"],
        .pdf-generation-temp .brutalist-template [style*="background:rgb(0, 0, 0)"] {
            color: #ffffff !important;
        }

        /* Also target all children and text nodes of black background elements */
        .pdf-generation-temp .brutalist-template [style*="background: #000"] *,
        .pdf-generation-temp .brutalist-template [style*="background:#000"] *,
        .pdf-generation-temp .brutalist-template [style*="background-color: #000"] *,
        .pdf-generation-temp .brutalist-template [style*="background-color:#000"] *,
        .pdf-generation-temp .brutalist-template [style*="background: #000"] span,
        .pdf-generation-temp .brutalist-template [style*="background:#000"] span,
        .pdf-generation-temp .brutalist-template [style*="background-color: #000"] span,
        .pdf-generation-temp .brutalist-template [style*="background-color:#000"] span {
            color: #ffffff !important;
        }
    }
}
